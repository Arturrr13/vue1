"use strict";(self["webpackChunkvue1"]=self["webpackChunkvue1"]||[]).push([[778],{2608:function(t,i,e){e.r(i),e.d(i,{default:function(){return _}});var s=e(3396),n=e(7139),h=e(9242);const a=t=>((0,s.dD)("data-v-3220bf84"),t=t(),(0,s.Cn)(),t),o={key:0,class:"message",ref:"message"},l=a((()=>(0,s._)("h1",null,"News",-1))),r={class:"graph__buttons"},c=["value"],g=["onClick"],d={id:"graph",ref:"graph"};function m(t,i,e,a,m,u){const w=(0,s.up)("sprite-animation");return(0,s.wg)(),(0,s.iD)("section",null,[null!==m.error?((0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("p",null,(0,n.zw)(m.error.message),1),(0,s._)("button",{onClick:i[0]||(i[0]=(...t)=>u.closeMessage&&u.closeMessage(...t))},"X")],512)):(0,s.kq)("",!0),l,(0,s._)("div",r,[(0,s.wy)((0,s._)("select",{name:"",id:"",onClick:i[2]||(i[2]=t=>u.setCoin()),"onUpdate:modelValue":i[3]||(i[3]=t=>m.coin=t)},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(m.coinSelect,((t,e)=>((0,s.wg)(),(0,s.iD)("option",{key:e,value:`${t}`,onClick:i[1]||(i[1]=t=>u.setCoin())},(0,n.zw)(t),9,c)))),128))],512),[[h.bM,m.coin]]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(m.buttonData,((t,i)=>((0,s.wg)(),(0,s.iD)("button",{key:i,id:"click",onClick:i=>u.setTime(t)},(0,n.zw)(t),9,g)))),128))]),(0,s._)("canvas",d,null,512),(0,s.Wm)(w)])}var u=e(6265),w=e.n(u),f=e.p+"img/Sprite.5b233031.png";const D=t=>((0,s.dD)("data-v-53446088"),t=t(),(0,s.Cn)(),t),p=D((()=>(0,s._)("canvas",{id:"animation"},null,-1))),v=D((()=>(0,s._)("img",{id:"img",src:f,alt:""},null,-1))),y=[p,v];function k(t,i,e,n,h,a){return(0,s.wg)(),(0,s.iD)("section",null,y)}var x={data(){return{x:100,y:100,image:null}},name:"SpriteAnimation",mounted(){this.anim()},methods:{anim(){const t=document.querySelector("#animation"),i=t.getContext("2d");t.width=document.querySelector("#animation").clientWidth,t.height=document.querySelector("#animation").clientHeight,requestAnimationFrame(this.anim),i.beginPath(),i.arc(this.x,this.y,5,0,6.28),i.fillStyle="red",i.fill(),this.y<300&&(this.x+=2,this.y+=.5)}}},C=e(89);const S=(0,C.Z)(x,[["render",k],["__scopeId","data-v-53446088"]]);var b=S,M={data(){return{buttonData:["5min","15min","30min","1h","4h","1day","1week","1month"],newsData:null,valueONpx:null,coinMin:null,coinMax:null,width:null,height:null,coinSelect:["BTC/USD","XRP/USD","DOGE/USD","LTC/USD","ETH/USD"],coin:"BTC/USD",newCoin:"",time:"1day",size:48,error:null}},components:{SpriteAnimation:b},mounted(){this.getData()},methods:{getData(){this.height=this.$refs.graph.clientHeight,this.width=this.$refs.graph.clientWidth,w().get(`https://api.twelvedata.com/time_series?symbol=${this.coin}&type=Stock&interval=${this.time}&outputsize=${this.size}&apikey=d5dc74ee1581433092f67d0f03544937`).then((t=>{this.coinMax=0,this.coinMin=0,this.newsData=t.data.values,this.error="error"===t.data.status?t.data:null,this.newsData.forEach((t=>{t.high>this.coinMax&&(this.coinMax=t.high,this.coinMin=t.high)})),this.newsData.forEach((t=>{t.low<this.coinMin&&(this.coinMin=t.low)})),this.valueONpx=(this.coinMax-this.coinMin)/(this.height-50),this.graph()})).catch((()=>{this.messageError()}))},messageError(){var t=document.getElementById("graph"),i=t.getContext("2d");t.width=this.width,t.height=this.height,i.beginPath(),i.font="bold 40px Raleway",i.fillStyle="#fffff3",i.textAlign="center",i.fillText(this.error.code,this.width,this.height/2),i.stroke(),i.closePath()},closeMessage(){this.$refs.message.animate([{transform:"translateX(0)"},{transform:"translateX(105%)"}],{duration:500,fill:"both"}),setTimeout((()=>this.error=null),500)},graph(){var t=document.getElementById("graph"),i=t.getContext("2d");t.width=this.width,t.height=this.height,i.beginPath(),i.lineWidth=1,i.strokeStyle="#fffff3",i.font="bold 20px Raleway",i.fillStyle="#fffff3";for(let e=1;e<=5;e++){let t=(this.height-50)/5*e,s=t*this.valueONpx+parseInt(this.coinMin),n=s>100?s.toFixed(1):s<100&&s>10?s.toFixed(2):s<10&&s>1?s.toFixed(3):s.toFixed(4);i.fillText(n,5,this.height-t-5),i.moveTo(0,this.height-t),i.lineTo(this.width,this.height-t)}i.stroke(),i.closePath(),i.beginPath(),i.lineWidth=3,i.strokeStyle="#63AF8F";for(let e in this.newsData){let t=this.width/this.newsData.length*e,s=this.height-(this.newsData[this.newsData.length-e-1].close-this.coinMin)/this.valueONpx;i.lineTo(t,s)}i.stroke(),i.closePath(),i.beginPath(),i.lineWidth=2,i.strokeStyle="#5F3791",i.fillStyle="#5F3791";for(let e in this.newsData){let t=this.width/this.newsData.length*e,s=this.height-(this.newsData[this.newsData.length-e-1].close-this.coinMin)/this.valueONpx,n=this.newsData[this.newsData.length-e-1].datetime.length>10?this.newsData[this.newsData.length-e-1].datetime.substring(this.newsData[this.newsData.length-e-1].datetime.length-8):this.newsData[this.newsData.length-e-1].datetime;e%(this.newsData.length/6)===0&&(i.moveTo(t,this.height-20),i.lineTo(t,s),i.fillText(n,t,this.height-5))}i.stroke(),i.closePath()},setCoin(){this.newCoin!==this.coin&&""!==this.newCoin&&this.getData(),this.newCoin=this.coin},setTime(t){"5min"===t?(this.time="5min",this.size=48):"15min"===t?(this.time="15min",this.size=48):"30min"===t?(this.time="30min",this.size=48):"1h"===t?(this.time="1h",this.size=48):"4h"===t?(this.time="4h",this.size=48):"1day"===t?(this.time="1day",this.size=48):"1week"===t?(this.time="1week",this.size=48):"1month"===t&&(this.time="1month",this.size=48),this.getData()}}};const T=(0,C.Z)(M,[["render",m],["__scopeId","data-v-3220bf84"]]);var _=T}}]);
//# sourceMappingURL=778.4af64544.js.map